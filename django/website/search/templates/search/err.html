{% extends "search/base.html" %}
{% block content %}
{{ jsonData|json_script:"jsonData_name" }} 
        <span style="font-size: x-large">{{errorMessage}}</span>
        <form method="GET" action="{% url 'search-results' %}">
                <pre class="tab"> </pre>
                <a>Do you want to try again?</a>
                <input name="q" id="search_bar" value="{{request.GET.q}}" placeholder="Type your products..." onkeyup="display('search_bar')"/>
                <style>#search_bar {position: static;}</style>
		<script>
		var dict = {};
		var dict = JSON.parse(document.getElementById('jsonData_name').textContent);

		function getValue(myKey)
		{
			return dict[myKey];
		};

		function display(id)
		{
			var counter = 0;
			lista = document.getElementById(id).value.split(" ");
			for (word in lista)
			{
				counter += 1;
			}
			var target = lista[counter-1];
			if(target === "" || target === " ")
			{
				target = lista[counter-2];
			}
			var value = getValue(target);
			if(value === undefined)
			{
				
				document.getElementById("demo").innerHTML = " ";
			}
			else
			{
				
				document.getElementById("demo").innerHTML = value;
			}
		}
	        </script>
	        <button class="btn btn-success" id="search-button" type="submit">
		        Search
                </button><br></p>
                <h3 style="font-size:20px"name="hints" id="hints"><style>#hints{position: absolute; left: 100px; }</style>Suggested product:</h3>
                <div class="demo" id="demo"></div>
                <style>
                #demo{
                        /* text-align: None;  */
                        vertical-align: baseline;
                        font-size: 20px;
                        left: 280px; 
                        top: 125px;
                        position: absolute;
                        color: #28a745;
                }
                </style><br>
                <pre class="tab"> </pre>
                <input type="checkbox" id="blncd" name="blncd" value="t"> <label for="blncd">Balanced </label>
                <input type="checkbox" id="hprot" name="hprot" value="t"> <label for="hprot">High protein </label>
                <input type="checkbox" id="lfat" name="lfat" value="t"> <label for="lfat">Low-fat </label>
                <input type="checkbox" id="lcarb" name="lcarb" value="t"> <label for="lcarb">Low-carb </label>
                <input type="checkbox" id="vegan" name="vegan" value="t"> <label for="vegan">Vegan </label>
                <input type="checkbox" id="veg" name="veg" value="t"> <label for="veg">Vegetarian </label>
                <input type="checkbox" id="sugcon" name="sugcon" value="t"> <label for="sugcon">Sugar-conscious </label>
                <input type="checkbox" id="pnfree" name="pnfree" value="t"> <label for="pnfree">Peanut-free </label>
                <input type="checkbox" id="tnfree" name="tnfree" value="t"> <label for="tnfree">Tree-nut-free </label>
                <input type="checkbox" id="alcfree" name="alcfree" value="t"> <label for="alcfree">Alcohol-free </label>
                <pre class="tab"> </pre>
        </form>
{% endblock content %}